import{t as e}from"./index-BSdy6hJI.js";import{t}from"./lib-CRykhcnh.js";var n=e();const r={title:`setup gdb on mac silicon`,date:`2026-01-18`,description:`how to setup gdb on mac silicon(m series)`,tags:[`gdb`,`debug`,`mac`],draft:!1};function i(e){let r={a:`a`,code:`code`,figcaption:`figcaption`,figure:`figure`,h2:`h2`,h3:`h3`,li:`li`,p:`p`,pre:`pre`,span:`span`,ul:`ul`,...t(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.p,{children:[`this guide doesnt cover how to debug `,(0,n.jsx)(r.code,{children:`elf`}),` binaries, only focusing on how to setup gdb mac silicon. if you want to debug `,(0,n.jsx)(r.code,{children:`elf`}),` binaries, you can read this `,(0,n.jsx)(r.a,{href:`/blog/2026-01-gdb-x86_64-silicon`,children:`post`}),` instead.`]}),`
`,(0,n.jsxs)(r.h2,{id:`prerequisites`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#prerequisites`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`prerequisites`]}),`
`,(0,n.jsxs)(r.figure,{"data-rehype-pretty-code-figure":``,children:[(0,n.jsx)(r.figcaption,{"data-rehype-pretty-code-title":``,"data-language":`bash`,"data-theme":`vitesse-dark`,children:`install gdb and qemu`}),(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsx)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`brew`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` install`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` gdb`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` qemu`})]})})})]}),`
`,(0,n.jsxs)(r.h2,{id:`signing-gdb`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#signing-gdb`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`signing gdb`]}),`
`,(0,n.jsx)(r.p,{children:`signing gdb is required on macos because the kernel (specifically the taskgated service) restricts debuggers from controlling other processes for security.`}),`
`,(0,n.jsxs)(r.ul,{children:[`
`,(0,n.jsx)(r.li,{children:`gdb needs system privileges to inspect processes`}),`
`,(0,n.jsx)(r.li,{children:`macos treats this as high-risk, preventing malware easily taking over other processes`}),`
`]}),`
`,(0,n.jsx)(r.p,{children:`in my opinion this is a good choice made by apple because it ensures that only trusted debuggers can inspect processes, reducing the risk of malicious actors gaining unauthorized access to sensitive information.`}),`
`,(0,n.jsxs)(r.h3,{id:`create-certificate-configuration`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#create-certificate-configuration`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`create certificate configuration`]}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsxs)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:[(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`cat`}),(0,n.jsx)(r.span,{style:{color:`#CB7676`},children:` >`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-cert.conf`}),(0,n.jsx)(r.span,{style:{color:`#CB7676`},children:` <<`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`EOF`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`[ req ]`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`default_bits       = 2048`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`distinguished_name = req_distinguished_name`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`x509_extensions    = v3_ca`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`prompt             = no`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`[ req_distinguished_name ]`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`CN = gdb-cert`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`[ v3_ca ]`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`basicConstraints = CA:TRUE`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`keyUsage = critical,digitalSignature`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`extendedKeyUsage = codeSigning`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`EOF`})})]})})}),`
`,(0,n.jsxs)(r.h3,{id:`generate-self-signed-certificate`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#generate-self-signed-certificate`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`generate self-signed certificate`]}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsxs)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:[(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`openssl`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` req`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -new`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -newkey`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` rsa:2048`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -days`}),(0,n.jsx)(r.span,{style:{color:`#4C9A91`},children:` 3650`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -nodes`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -x509`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` \\`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#C99076`},children:`  -keyout`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-cert.key`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` \\`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#C99076`},children:`  -out`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-cert.crt`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` \\`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#C99076`},children:`  -config`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-cert.conf`})]})]})})}),`
`,(0,n.jsxs)(r.h3,{id:`import-certificate-and-key-directly-into-system-keychain`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#import-certificate-and-key-directly-into-system-keychain`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`import certificate and key directly into system keychain`]}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsx)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`sudo`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` security`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` import`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-cert.crt`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -k`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /Library/Keychains/System.keychain`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -T`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /usr/bin/codesign`})]})})})}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsx)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`sudo`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` security`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` import`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-cert.key`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -k`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /Library/Keychains/System.keychain`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -T`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /usr/bin/codesign`})]})})})}),`
`,(0,n.jsxs)(r.h3,{id:`trust-the-certificate-prompts-for-your-password-or-touch-id`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#trust-the-certificate-prompts-for-your-password-or-touch-id`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`trust the certificate (prompts for your password (or touch id))`]}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsxs)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:[(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`sudo`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` security`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` add-trusted-cert`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -d`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -r`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` trustRoot`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` \\`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#C99076`},children:`  -k`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /Library/Keychains/System.keychain`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-cert.crt`})]})]})})}),`
`,(0,n.jsxs)(r.h3,{id:`create-entitlements-file`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#create-entitlements-file`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`create entitlements file`]}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsxs)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:[(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`cat`}),(0,n.jsx)(r.span,{style:{color:`#CB7676`},children:` >`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-entitlement.xml`}),(0,n.jsx)(r.span,{style:{color:`#CB7676`},children:` <<`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`EOF`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`<?xml version="1.0" encoding="UTF-8"?>`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`<plist version="1.0">`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`<dict>`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`    <key>com.apple.security.cs.debugger</key>`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`    <true/>`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`</dict>`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`</plist>`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`EOF`})})]})})}),`
`,(0,n.jsxs)(r.h3,{id:`sign-gdb-and-verify`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#sign-gdb-and-verify`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`sign gdb and verify`]}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsx)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`codesign`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` --entitlements`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` /tmp/gdb-entitlement.xml`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -fs`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` gdb-cert`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:` $(`}),(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`which`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` gdb`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`)`})]})})})}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsx)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`codesign`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` -vv`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:` $(`}),(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`which`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` gdb`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`)`})]})})})}),`
`,(0,n.jsx)(r.p,{children:`i know it was a little bit tricky to get right, but it's worth it to have a fully functional gdb on macOS.`})]})}function a(e={}){let{wrapper:r}={...t(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}export{a as default,r as frontmatter};