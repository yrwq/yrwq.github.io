import{t as e}from"./index-FHZ6s2id.js";import{t}from"./lib-BsAxLoZu.js";var n=e();const r={title:`debugging x86_64 elf on mac silicon`,date:`2026-01-17`,description:`how to debug x86_64 elf(linux) binaries on mac silicon(m series)`,tags:[`gdb`,`debug`,`mac`],draft:!1};function i(e){let r={a:`a`,code:`code`,figcaption:`figcaption`,figure:`figure`,h2:`h2`,h3:`h3`,li:`li`,p:`p`,pre:`pre`,span:`span`,ul:`ul`,...t(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.h2,{id:`lima`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#lima`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`lima`]}),`
`,(0,n.jsxs)(r.p,{children:[`the most straightforward and easiest way is to install a x86_64 linux vm with `,(0,n.jsx)(`a`,{href:`https://github.com/lima-vm/lima`,target:`_blank`,children:`lima`}),`.`]}),`
`,(0,n.jsxs)(r.figure,{"data-rehype-pretty-code-figure":``,children:[(0,n.jsx)(r.figcaption,{"data-rehype-pretty-code-title":``,"data-language":`bash`,"data-theme":`vitesse-dark`,children:`install lima`}),(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsx)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`brew`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` install`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` lima`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` qemu`})]})})})]}),`
`,(0,n.jsxs)(r.ul,{children:[`
`,(0,n.jsx)(r.li,{children:`start an x86_64 lima vm with qemu`}),`
`]}),`
`,(0,n.jsx)(r.figure,{"data-rehype-pretty-code-figure":``,children:(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`bash`,"data-theme":`vitesse-dark`,children:(0,n.jsx)(r.code,{"data-language":`bash`,"data-theme":`vitesse-dark`,style:{display:`grid`},children:(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#80A665`},children:`limactl`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` start`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` --arch=x86_64`}),(0,n.jsx)(r.span,{style:{color:`#C99076`},children:` --vm-type=qemu`})]})})})}),`
`,(0,n.jsxs)(r.p,{children:[`you access the vm with `,(0,n.jsx)(r.code,{children:`lima`})]}),`
`,(0,n.jsxs)(r.p,{children:[`now you can use `,(0,n.jsx)(r.code,{children:`gdb`}),` for example to debug x86_64 binaries on the vm.`]}),`
`,(0,n.jsxs)(r.h3,{id:`running-a-kali-vm-with-lima`,children:[(0,n.jsx)(r.a,{"aria-hidden":`true`,tabIndex:`-1`,href:`#running-a-kali-vm-with-lima`,children:(0,n.jsx)(r.span,{className:`icon icon-link`})}),`running a kali vm with lima`]}),`
`,(0,n.jsxs)(r.p,{children:[`i tried the normal kali iso and the kali vm image from `,(0,n.jsx)(`a`,{href:`https://www.kali.org/get-kali/#vm`,target:`_blank`,children:`kali.org`}),`, but neither worked.`]}),`
`,(0,n.jsx)(r.p,{children:`my workaround is to setup a debian vm and install kali tools on it.`}),`
`,(0,n.jsxs)(r.ul,{children:[`
`,(0,n.jsxs)(r.li,{children:[`create a `,(0,n.jsx)(r.code,{children:`kali.yaml`}),` file with the following content:`]}),`
`]}),`
`,(0,n.jsxs)(r.figure,{"data-rehype-pretty-code-figure":``,children:[(0,n.jsx)(r.figcaption,{"data-rehype-pretty-code-title":``,"data-language":`yaml`,"data-theme":`vitesse-dark`,children:`kali.yaml`}),(0,n.jsx)(r.pre,{style:{backgroundColor:`#121212`,color:`#dbd7caee`},tabIndex:`0`,"data-language":`yaml`,"data-theme":`vitesse-dark`,children:(0,n.jsxs)(r.code,{"data-line-numbers":``,"data-language":`yaml`,"data-theme":`vitesse-dark`,style:{display:`grid`},"data-line-numbers-max-digits":`2`,children:[(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`vmType`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:` "`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`qemu`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`"`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`os`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:` "`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`Linux`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`"`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`arch`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:` "`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`x86_64`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`"`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#758575DD`},children:`# use debian cloud image as base (more reliable)`})}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`images`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#666666`},children:`  -`}),(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:` location`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:` "`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-generic-amd64.qcow2`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`"`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`    arch`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:` "`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`x86_64`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`"`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`cpus`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#4C9A91`},children:` 4`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`memory`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:` "`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`4GiB`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`"`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`disk`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:` "`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`60GiB`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`"`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`firmware`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`  legacyBIOS`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#4D9375`},children:` false`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`mounts`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#666666`},children:`  -`}),(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:` location`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:` "`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`~`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D77`},children:`"`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`    writable`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#4D9375`},children:` true`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`ssh`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`  localPort`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#4C9A91`},children:` 0`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`  loadDotSSHPubKeys`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#4D9375`},children:` true`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`containerd`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`  system`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#4D9375`},children:` false`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`  user`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#4D9375`},children:` false`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:` `}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`provision`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#666666`},children:`  -`}),(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:` mode`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:` system`})]}),`
`,(0,n.jsxs)(r.span,{className:`line`,"data-line":``,children:[(0,n.jsx)(r.span,{style:{color:`#B8A965`},children:`    script`}),(0,n.jsx)(r.span,{style:{color:`#666666`},children:`:`}),(0,n.jsx)(r.span,{style:{color:`#4D9375`},children:` |`})]}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      #!/bin/bash`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      set -eux -o pipefail`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      `})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      export DEBIAN_FRONTEND=noninteractive`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      apt update`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      apt upgrade -y`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      `})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      apt install -y gnupg2 apt-transport-https`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      `})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      echo "deb http://http.kali.org/kali kali-rolling main contrib non-free non-free-firmware" > /etc/apt/sources.list.d/kali.list`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      `})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      wget -q -O - https://archive.kali.org/archive-key.asc | gpg --dearmor > /etc/apt/trusted.gpg.d/kali-archive-keyring.gpg`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      apt update`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      `})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      apt install -y kali-linux-core`})}),`
`,(0,n.jsx)(r.span,{className:`line`,"data-line":``,children:(0,n.jsx)(r.span,{style:{color:`#C98A7D`},children:`      `})})]})})]}),`
`,(0,n.jsxs)(r.p,{children:[`access the vm with `,(0,n.jsx)(r.code,{children:`limactl shell kali`})]}),`
`,(0,n.jsx)(r.p,{children:`if you want you can install`}),`
`,(0,n.jsxs)(r.ul,{children:[`
`,(0,n.jsxs)(r.li,{children:[`no gui tools `,(0,n.jsx)(r.code,{children:`apt install kali-linux-headless`})]}),`
`,(0,n.jsxs)(r.li,{children:[`deafult tools `,(0,n.jsx)(r.code,{children:`apt install kali-linux-default`})]}),`
`,(0,n.jsxs)(r.li,{children:[`all of the tools `,(0,n.jsx)(r.code,{children:`apt install kali-linux-everything`})]}),`
`,(0,n.jsxs)(r.li,{children:[`or a category `,(0,n.jsx)(r.code,{children:`apt install kali-tools-reverse-engineering`})]}),`
`]})]})}function a(e={}){let{wrapper:r}={...t(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}export{a as default,r as frontmatter};